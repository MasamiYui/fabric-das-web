<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" >  <!--style="overflow: hidden;"-->

<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>

    <title>可信数字资产存证系统</title>

    <link rel="icon" type="image/x-icon" href="/ico/favicon.png">

    <!-- Bootstrap Core CSS -->
    <link th:href="@{/jcstatic/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet"/>

    <!-- MetisMenu CSS -->
    <link th:href="@{/jcstatic/vendor/metisMenu/metisMenu.min.css}" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link th:href="@{/jcstatic/dist/css/sb-admin-2.css}" rel="stylesheet"/>

    <!-- Custom Fonts -->
    <link th:href="@{/jcstatic/vendor/font-awesome/css/font-awesome.min.css}" rel="stylesheet" type="text/css"/>

    <!--引入layui的css-->
    <link th:href="@{/jcstatic/layui/css/layui.css}" rel="stylesheet" type="text/css"/>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script th:src="@{https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js}"></script>
    <script th:src="@{https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js}"></script>
    <![endif]-->

    <!--引入jquery-->
    <script th:src="@{/jcstatic/vendor/jquery/jquery.js}"></script>

    <style type="text/css">
        .layui-upload-img {
            width: 100px;
            height: 110px;
            margin-left: 5px;
        }

        .col-title {
            font-weight: 700;
        }

        table tbody>tr td:last-child{
            text-align: center;
        }


    </style>

</head>


<body>

<div id="wrapper">
    <div id="page-wrapper" style="margin: 10px;">
        <!--基本信息对比-->
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 style="text-align: center" >数据信息对比结果</h3>
                    </div>
                    <div class="panel-heading">
                        <div class="controls">
                            <div class="controls">
                                <span class="col-title">资产类型：</span>
                                <span>学历证书</span>
                               <!-- <th:block th:switch="${result.mongoData.}">
                                    <span th:case="1">学生证</span>
                                    <span th:case="*">无类型</span> &lt;!&ndash;*表示默认类型&ndash;&gt;
                                </th:block>-->
                            </div>
                            <span class="col-title">资产编号：</span>
                            <span th:text="${result.data.mongoData.id}"></span>
                        </div>
                        <div class="controls">
                            <span class="col-title">交易哈希：</span>
                            <span th:text="${result.data.mongoData.transactionId}"></span>
                        </div>

                    </div>
                    <!-- /.panel-heading -->
                    <div class="panel-body">
                        <div class="table-responsive" style="overflow-x:hidden;">
                            <table class="table table-striped table-bordered table-hover">
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>本地数据库</th>
                                    <th>区块链数据库</th>
                                    <th>对比结果</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>专利名称名称</td>
                                    <td th:text="${result.data.mongoData.syxxmc}"></td>
                                    <td th:text="(${result.data.mongoData.state}!='0')?${result.data.fabricData.syxxmc}:'无数据'"></td>
                                    <td>
                                        <th:block  th:if="${result.data.mongoData.state} eq 0">
                                            <i  class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                        <th:block  th:if="${result.data.mongoData.state} ne 0">
                                            <i th:if="${result.data.mongoData.syxxmc}==${result.data.fabricData.syxxmc}" class="glyphicon glyphicon-ok"></i>
                                            <i th:if="${result.data.mongoData.syxxmc}!=${result.data.fabricData.syxxmc}" class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                    </td>
                                </tr>
                                <tr>
                                    <td>发明人</td>
                                    <td th:text="${result.data.mongoData.fmr}"></td>
                                    <td th:text="(${result.data.mongoData.state}!='0')?${result.data.fabricData.fmr}:'无数据'"></td>
                                    <td>
                                        <th:block  th:if="${result.data.mongoData.state} eq 0">
                                            <i  class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                        <th:block  th:if="${result.data.mongoData.state} ne 0">
                                            <i th:if="${result.data.mongoData.fmr}==${result.data.fabricData.fmr}" class="glyphicon glyphicon-ok"></i>
                                            <i th:if="${result.data.mongoData.fmr}!=${result.data.fabricData.fmr}" class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                    </td>
                                </tr>
                                <tr>
                                    <td>专利号</td>
                                    <td th:text="${result.data.mongoData.zlh}"></td>
                                    <td th:text="(${result.data.mongoData.state}!='0')?${result.data.fabricData.zlh}:'无数据'"></td>
                                    <td>
                                        <th:block  th:if="${result.data.mongoData.state} eq 0">
                                            <i  class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                        <th:block  th:if="${result.data.mongoData.state} ne 0">
                                            <i th:if="${result.data.mongoData.zlh}==${result.data.fabricData.zlh}" class="glyphicon glyphicon-ok"></i>
                                            <i th:if="${result.data.mongoData.zlh}!=${result.data.fabricData.zlh}" class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                    </td>
                                </tr>
                                <tr>
                                    <td>专利申请日</td>
                                    <td th:text="${result.data.mongoData.zlsqr}"></td>
                                    <td th:text="(${result.data.mongoData.state}!='0')?${result.data.fabricData.zlsqr}:'无数据'"></td>
                                    <td>
                                        <th:block  th:if="${result.data.mongoData.state} eq 0">
                                            <i  class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                        <th:block  th:if="${result.data.mongoData.state} ne 0">
                                            <i th:if="${result.data.mongoData.zlsqr}==${result.data.fabricData.zlsqr}" class="glyphicon glyphicon-ok"></i>
                                            <i th:if="${result.data.mongoData.zlsqr}!=${result.data.fabricData.zlsqr}" class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                    </td>
                                </tr>
                                <tr>
                                    <td>专利权人</td>
                                    <td th:text="${result.data.mongoData.zlqr}"></td>
                                    <td th:text="(${result.data.mongoData.state}!='0')?${result.data.fabricData.zlqr}:'无数据'"></td>
                                    <td>
                                        <th:block  th:if="${result.data.mongoData.state} eq 0">
                                            <i  class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                        <th:block  th:if="${result.data.mongoData.state} ne 0">
                                            <i th:if="${result.data.mongoData.zlqr}==${result.data.fabricData.zlqr}" class="glyphicon glyphicon-ok"></i>
                                            <i th:if="${result.data.mongoData.zlqr}!=${result.data.fabricData.zlqr}" class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                    </td>
                                </tr>
                                <tr>
                                    <td>授权公告日</td>
                                    <td th:text="${result.data.mongoData.sqggr}"></td>
                                    <td th:text="(${result.data.mongoData.state}!='0')?${result.data.fabricData.sqggr}:'无数据'"></td>
                                    <td>
                                        <th:block  th:if="${result.data.mongoData.state} eq 0">
                                            <i  class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                        <th:block  th:if="${result.data.mongoData.state} ne 0">
                                            <i th:if="${result.data.mongoData.sqggr}==${result.data.fabricData.sqggr}" class="glyphicon glyphicon-ok"></i>
                                            <i th:if="${result.data.mongoData.sqggr}!=${result.data.fabricData.sqggr}" class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                    </td>
                                </tr>
                                <tr>
                                    <td>发证时间</td>
                                    <td th:text="${result.data.mongoData.fzsj}"></td>
                                    <td th:text="(${result.data.mongoData.state}!='0')?${result.data.fabricData.fzsj}:'无数据'"></td>
                                    <td>
                                        <th:block  th:if="${result.data.mongoData.state} eq 0">
                                            <i  class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                        <th:block  th:if="${result.data.mongoData.state} ne 0">
                                            <i th:if="${result.data.fabricData.fzsj}==${result.data.fabricData.fzsj}" class="glyphicon glyphicon-ok"></i>
                                            <i th:if="${result.data.fabricData.fzsj}!=${result.data.fabricData.fzsj}" class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                    </td>
                                </tr>
                                <tr>
                                    <td>文件哈希值</td>
                                    <td th:text="${result.data.mongoData.filesHash}"></td>
                                    <td th:text="(${result.data.mongoData.state}!='0')?${result.data.fabricData.filesHash}:'无数据'"></td>
                                    <td>
                                        <th:block  th:if="${result.data.mongoData.state} eq 0">
                                            <i  class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                        <th:block  th:if="${result.data.mongoData.state} ne 0">
                                            <i th:if="${result.data.mongoData.filesHash}==${result.data.fabricData.filesHash}" class="glyphicon glyphicon-ok"></i>
                                            <i th:if="${result.data.mongoData.filesHash}!=${result.data.fabricData.filesHash}" class="glyphicon glyphicon-remove"></i>
                                        </th:block>
                                    </td>
                                </tr>
                                </tbody>
                            </table>


                            <!--图片-->
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="panel panel-success">
                                        <div class="panel-heading">
                                            <strong>附件</strong>
                                        </div>
                                        <div class="panel-body">
                                            <div id="layer-photos-demo" class="layui-upload-list" style="margin:0px">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!--审核状态radio选择-->
                            <div class="control-group col-lg-12">
                                <form role="form" id="dataform">
                                    <div class="form-group">
                                        <div class="form-group">
                                            <label class="radio-inline">
                                                <th:block th:if="${result.data.mongoData.state}=='0'">
                                                    <input type="radio" name="state" value="0" checked="true"/>未审核
                                                </th:block>
                                                <th:block th:unless="${result.data.mongoData.state}=='0'">
                                                    <input  type="radio" name="state" value="0" />未审核
                                                </th:block>
                                            </label>
                                            <label class="radio-inline">
                                                <th:block th:if="${result.data.mongoData.state}=='1'">
                                                    <input  type="radio" name="state" value="1" checked="true"/>已审核
                                                </th:block>
                                                <th:block th:unless="${result.data.mongoData.state}=='1'">
                                                    <input  type="radio" name="state" value="1"/>已审核
                                                </th:block>
                                            </label>
                                            <label class="radio-inline">
                                                <th:block th:if="${result.data.mongoData.state}=='2'">
                                                    <input   type="radio" name="state" value="2"  checked="true"/>不通过
                                                </th:block>
                                                <th:block th:unless="${result.data.mongoData.state}=='2'">
                                                    <input   type="radio" name="state" value="2"/>不通过
                                                </th:block>
                                            </label>
                                            <label class="radio-inline">
                                                <th:block th:if="${result.data.mongoData.state}=='3'">
                                                    <input  type="radio" name="state" value="3" checked="true"/>注销
                                                </th:block>
                                                <th:block th:unless="${result.data.mongoData.state}=='3'">
                                                    <input  type="radio" name="state" value="3"/>注销
                                                </th:block>
                                            </label>
                                        </div>

                                        <!--确认按钮-->
                                        <div class="col-lg-12 text-right">
                                            <button type="button" id="btSubmit" class="btn btn-primary btn-info"
                                                    style="width: 100px;">
                                                确&nbsp;&nbsp;定
                                            </button>
                                            <button type="button" id="btBack" class="btn btn-primary btn-info"
                                                    style="width: 100px;">
                                                返&nbsp;&nbsp;回
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <!--这里是radio-->
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!--图片-->
       <!-- <div class="row">
            &lt;!&ndash;<div class="col-lg-3"></div>&ndash;&gt;

            <div class="col-lg-12">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <strong>本地数据库附件</strong>
                    </div>
                    <div class="panel-body">
                        <div id="layer-photos-demo" class="layui-upload-list" style="margin:0px">
                             <th:block th:each="file:${result.data.mongoData.files}">
                                 <img th:src="${file}" class="layui-upload-img"/>
                             </th:block>
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-lg-12">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <strong>区块链附件</strong>
                    </div>
                    <div class="panel-body">
                        <div id="layer-photos-demo2" class="layui-upload-list" style="margin:0px">
                            <th:block th:each="file:${result.data.fabricData.files}">
                                <img th:src="${file}" class="layui-upload-img"/>
                            </th:block>
                        </div>
                    </div>

                </div>
            </div>

            &lt;!&ndash;<div class="col-lg-3"></div>&ndash;&gt;
        </div>-->

    </div>
</div>
<!-- /#wrapper -->

<!-- jQuery -->
<script th:src="@{/jcstatic/vendor/jquery/jquery.min.js}"></script>

<!-- Bootstrap Core JavaScript -->
<script th:src="@{/jcstatic/vendor/bootstrap/js/bootstrap.min.js}"></script>

<!-- Metis Menu Plugin JavaScript -->
<script th:src="@{/jcstatic/vendor/metisMenu/metisMenu.min.js}"></script>

<!-- Custom Theme JavaScript -->
<script th:src="@{/jcstatic/dist/js/sb-admin-2.js}"></script>

<!--引入layui:日期插件-->
<script th:src="@{/jcstatic/layui/layui.js}"></script>

<script th:inline="javascript">
    $(document).ready(function () {
        photoShow();
    });

    function photoShow(){
        var file =[[${result.data.mongoData.files}]];
        if(!file) return;
        $("#layer-photos-demo").append('<img src="'+file+'"  class="layui-upload-img"/>');
    }

 layui.use('layer', function () {
     var layer = layui.layer;
     layer.photos({
         photos: '#layer-photos-demo'
         , anim: 5 //0-6的选择
     });
 });


    var id = [[${result.data.mongoData.id}]];
    $("#btSubmit").click(function () {
        var $this = $(this);
        $this.prop("disabled", true);
        var state = $('input[name="state"]:checked').val();
        var data = {id: id, state: state};
        $.ajax({
            type: "post",
            url: "/asset/syxxzl",
            data: data,
            dataType: "json",
            success: function (result) {
                if (result.code == "200") {
                    callbackMsg("修改成功");
                    parent.search();
                } else if (result.code == "400") {
                    callbackMsg("修改失败");
                }
            },
            complete: function (XMLHttpRequest, textStatus) {
                $this.prop("disabled", false);
                /*parent.close();*/
            }
        });
    });

    $("#btBack").click(function(){
        parent.close();
    });

    function callbackMsg(data) {
        layui.use('layer', function () {
            var layer = layui.layer;
            layer.open({
                title: '结果'
                , content: '<p style="text-align: center;">' +data+'</p>'
                ,offset: '160px'
                , end: function () {
                    parent.close();
                }
            });
        });
    }




</script>

</body>

</html>
