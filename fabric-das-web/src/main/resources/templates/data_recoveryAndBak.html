<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>

    <title>可信数字资产存证系统</title>

    <link rel="icon" type="image/x-icon" href="ico/favicon.png">

    <!-- Bootstrap Core CSS -->
    <link th:href="@{/jcstatic/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet"/>

    <!-- MetisMenu CSS -->
    <link th:href=" @{/jcstatic/vendor/metisMenu/metisMenu.min.css}" rel="stylesheet"/>

    <!-- DataTables CSS -->
    <link th:href="@{/jcstatic/vendor/datatables-plugins/dataTables.bootstrap.css}" rel="stylesheet"/>

    <!-- DataTables Responsive CSS -->
    <link th:href="@{/jcstatic/vendor/datatables-responsive/dataTables.responsive.css}" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link th:href="@{/jcstatic/dist/css/sb-admin-2.css}" rel="stylesheet"/>

    <!-- Custom Fonts -->
    <link th:href="@{/jcstatic/vendor/font-awesome/css/font-awesome.min.css}" rel="stylesheet" type="text/css"/>

    <!--引入layui的css-->
    <link th:href="@{/jcstatic/layui/css/layui.css}" rel="stylesheet" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script th:src="@{https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js}"></script>
    <script th:src="@{https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js}"></script>
    <![endif]-->

</head>

<body>

<div id="wrapper">

    <!-- Navigation -->
    <div th:replace="/nav::navigation"></div>
    <!--列表页的展示-->
    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h3 class="page-header">数据恢复与备份</h3>
            </div>
        </div>
        <!-- /.row -->
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="table-responsive" style="overflow-x: hidden">
                            <div class="alert alert-success">成功！很好地完成了提交。</div>
                            <div class="alert alert-info">当前区块高度：
                                <strong>112</strong>
                            </div>

                            <div class="col-lg-12 alert alert-danger">
                                <div class="col-lg-2">
                                    <button class="btn btn-default" style="width: 100px;" type="button"
                                            onclick="bakShow()">
                                        数据恢复
                                    </button>
                                </div>
                                <div class="col-lg-10" style="display:none;" id="bakDiv">
                                    <form class="form-inline">
                                        <input type="text" id="blockStart" class="form-control" placeholder="输入区块起始高度"
                                               style="width:150px;"/>
                                        <input type="text" id="blockEnd" class="form-control" placeholder="输入区块终止高度"
                                               style="width:150px;"/>
                                        <button class="btn btn-default btn-info" id="btSubmit" type="button">
                                            确定
                                        </button>
                                    </form>
                                </div>
                            </div>

                            <div class="col-lg-12 alert alert-warning">
                                <div class="layui-progress layui-progress-big" lay-showpercent="true" lay-filter="demo">
                                    <div class="layui-progress-bar layui-bg-blue" lay-percent="0%"></div>
                                </div>
                            </div>
                            <div>
                                <button id="submit" class="layui-btn">模拟loading</button>
                            </div>

                        </div>
                    </div>

                </div>
                <!-- /.panel -->
            </div>
            <!-- /.col-lg-12 -->
        </div>

    </div>
    <!-- /#page-wrapper -->

</div>
<!-- /#wrapper -->

<!-- jQuery -->
<script th:src="@{/jcstatic/vendor/jquery/jquery.min.js}"></script>

<!-- Bootstrap Core JavaScript -->
<script th:src="@{/jcstatic/vendor/bootstrap/js/bootstrap.min.js}"></script>

<!-- Metis Menu Plugin JavaScript -->
<script th:src="@{/jcstatic/vendor/metisMenu/metisMenu.min.js}"></script>

<!-- DataTables JavaScript -->
<script th:src="@{/jcstatic/vendor/datatables/js/jquery.dataTables.min.js}"></script>
<script th:src="@{/jcstatic/vendor/datatables-plugins/dataTables.bootstrap.min.js}"></script>
<script th:src="@{/jcstatic/vendor/datatables-responsive/dataTables.responsive.js}"></script>
<!-- Custom Theme JavaScript -->
<script th:src="@{/jcstatic/dist/js/sb-admin-2.js}"></script>

<!--引入分页插件-->
<script th:src="@{/jcstatic/paginator/bootstrap-paginator.js}"></script>

<!--引入layui插件-->
<script th:src="@{/jcstatic/layui/layui.js}"></script>

<!-- Page-Level Demo Scripts - Tables - Use for reference -->
<script>
    $(document).ready(function () {

    });

    $("#btSubmit").click(function () {
        var $this = $(this);
        $this.prop("disabled", true);
        if (validateForm()) {
            showPass();
        } else {
            $this.prop("disabled", false);
        }
    });

    function sendRequest() {
        $.ajax({
            type: "post",
            url: "",
            data: "",
            dataType: "json",
            success: function (result) {
                if (result.code = 200) {
                    callbackMsg("数据恢复成功");
                } else {
                    callbackMsg("数据恢复失败");
                }
            },
            complete: function (XMLHttpRequest, textStatus) {
                $this.prop("disabled", false);
            }
        });
    }

    function showPass() {
        layui.use('layer', function () {
            var layer = layui.layer;
            layer.prompt({title: '请输入密码', formType: 1}, function (pass, index) {
                layer.close(index);
                layer.msg('输入的密码是：' + pass);
                // sendRequest();   //输入密码后发送请求
            });
        });
    }


    function validateForm() {
        var blockStart = $("#blockStart").val();
        var blockEnd = $("#blockEnd").val();
        if (blockStart > blockEnd) {
            validateInfo();
            return false;
        }
        return true;
    }

    function validateInfo() {
        layui.use('layer', function () {
            var layer = layui.layer;
            layer.msg('区块高度区间不合法');
        });
    }

    $("#blockStart").keyup(function () {
        var val = $(this).val();
        if (!validateNum(val)) {
            tip("#blockStart");
        }
    });

    $("#blockEnd").keyup(function () {
        var val = $(this).val();
        if (!validateNum(val)) {
            tip("#blockEnd");
        }
    });

    function tip(e) {
        layui.use('layer', function () {
            var layer = layui.layer;
            layer.tips('请输入整数', e, {
                tips: [1, '#3595CC'],
                time: 1000
            });
        });
    }

    function validateNum(e) {
        var numReg = /^[1-9]\d*$/;
        return numReg.test(e);
    }


    function callbackMsg(data) {
        layui.use('layer', function () {
            var layer = layui.layer;
            layer.open({
                title: '结果'
                , content: data
                /*, end: function () {
                    parent.close();
                }*/
            });
        });
    }

    function bakShow() {
        $("#bakDiv").show();
    }

    layui.use('element', function () {
        var $ = layui.jquery, element = layui.element;
        //触发事件
        var active = {
            loading: function () {
                var n = 0, timer = setInterval(function () {
                    n = n + 10;
                    if (n > 100) {
                        n = 100;
                        clearInterval(timer);
                        callbackMsg("数据恢复成功");
                    }
                    element.progress('demo', n + '%');
                }, 300);
            }
        };

        $('#submit').on('click', function () {
            active.loading.call(this);
        });
    });


</script>

</body>

</html>
